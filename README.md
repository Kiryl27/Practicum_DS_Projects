# HR analysis with clasic ml models

Сборный проект — 2 HR-аналитика компании «Работа с заботой»
Описание проекта

HR-аналитики компании «Работа с заботой» помогают бизнесу оптимизировать управление персоналом: бизнес предоставляет данные, а аналитики предлагают, как избежать финансовых потерь и оттока сотрудников. В этом HR-аналитикам пригодится машинное обучение, с помощью которого получится быстрее и точнее отвечать на вопросы бизнеса. Компания предоставила данные с характеристиками сотрудников компании. Среди них — уровень удовлетворённости сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворённости от 0 до 1, где 0 — совершенно неудовлетворён, 1 — полностью удовлетворён. Собирать данные такими опросниками не так легко: компания большая, и всех сотрудников надо сначала оповестить об опросе, а затем проследить, что все его прошли.

Задачи проекта

построить модель, которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика.
построить модель, которая сможет на основе данных заказчика предсказать то, что сотрудник уволится из компании.
Исходные данные

Задача 1

Для этой задачи заказчик предоставил данные с признаками:

id — уникальный идентификатор сотрудника;
dept — отдел, в котором работает сотрудник;
level — уровень занимаемой должности;
workload — уровень загруженности сотрудника;
employment_years — длительность работы в компании (в годах);
last_year_promo — показывает, было ли повышение за последний год;
last_year_violations — показывает, нарушал ли сотрудник трудовой договор за последний год;
supervisor_evaluation — оценка качества работы сотрудника, которую дал руководитель;
salary — ежемесячная зарплата сотрудника;
job_satisfaction_rate — уровень удовлетворённости сотрудника работой в компании, целевой признак.
Задача 2

Для этой задачи вы можете использовать те же входные признаки, что и в предыдущей задаче. Однако целевой признак отличается: это quit — увольнение сотрудника из компании.

Шаги исследования

Задача 1

Загрузка данных
Предобработка данных
Исследовательский анализ данных
Подготовка данных
Обучение моделей
Оформление выводов
Задача 2

Загрузка данных
Предобработка данных
Исследовательский анализ данных
Добавление нового входного признака
Подготовка данных
Обучение модели
Выводы


Вывод
В ходе работы над проектом были решены две ключевые задачи: регрессии и классификации. Были созданы , протестированы и выбраны 2 лучшие модели, которые успешно прошли порог оценки качества

ПРЕДСКАЗАНИЕ УРОВНЯ УДОВЛЕТВОРЕННОСТИ СОТРУДНИКА

Мы загрузили необходимые для выполнения исследования билиотеки, а так же получили исходные данные. Мы выявили, что :

Названия столбцов не нужно менять
Все названия столбцов в трех таблицах одинаковы
Типы данных во всех датафреймах всех признаков совпадают с описанием.
Были выявлено незначительное количество пропусков в таких датафреймах как train_jsr, test_features_jsr в таких столбцах как dept , level ( категориальные данные) - данные пропуски заполним в будущем при помощи пайплайна, нет необходимости удалять их
Мы провели предобработку данных и выявили, что train_jsr:

исправили орфографическую ошибку sinior на senior в столбце level

заметили, что есть пропуски , которые заменим в пайплайне с обучением модели test_features_jsr:

исправили орфографическую ошибку sinior на senior в столбце level

заметили, что есть пропуски , которые заменим в пайплайне с обучением модели

заметили, что есть пробелы (" "), которые заменим в пайплайне с обучением модели

test_target_jsr:

С датасетом все в порядке

Мы провели иследовательский анализ данных, и выявили, что:

Мы провели исследовательский анализ данных и заметили, что:

dept - большенство объектов работают в отделе sales (38%), остальные отделы распределены следующим образом technology (21.6%), purchasing (15.3%), marketing (13.8%), hr (11.4%)
level - большенство объектов имеют уровень junior (47.5%) либо уровень middle (43.6%), совсем небольшое количество объектов имеет уровень senior (9%)
workload - половина объектов имеют ворклоуд medium (51.6%) , остальные имеют ворклоуд low (30%) либо же high ( 18.4%)
last_year_promo - почти все объекты не имели повышения в прошлом году, и лишь 3% имели повышение в прошлом году
last_year_violations - большенство объектов (86%) не имели нарушений, и 14% имели нарушения в прошлом году
employmant_years - в компании практически в 2 раза больше сотрудников, которые работают в ней до 3х лет: опытных сотрудников гораздо меньше. Стоит учесть это при переборе параметров для модели в дальнейшем
supervisor_evaluation - большенство объектов имеет оценку 4 или 3, так же видно что оценку 1 ставят редко, однако она тоже встречается
salary - медианная зарплата в компании составляет 30,000, болшенство данных распределено в промежутке от 22,800 до 43,200. Средняя зарпалата больше медианной на почти 34,000. Данные зарплаты распределены нормально со мещением влево. Чем выше уровень объекта, тем выше заработная плата. Самая большая медианная зарплата в отделе technology, самая маленькая - в отедле sales
job_satisfaction_rate - целевой признака распределены нормально, с медианным значеннием равным 0.56 и средним 0.53, большенство данных распределено в промежутке от 0.36 до 0.71.
Так же мы провели корреляционный анализ и заметили, что целевой признак имеет следующие зависимости:

очень сильная зависимость с признаком - supervisor_evaluation (0.76)
сильная зависимость с признаком - last_year_violations (0.56)
умеренная зависимость с признаком - employment_years (0.33)
слабая зависимость с признаком - last_year_promo(0.19), salary (0.17)
Не наблюдается связи со следующими признаками - dept, level, workload
Так же между входными признаками наблюдаются следующие сильные зависимости:

salary - workload ( 0.79)
salary - level ( 0.72)
emplayment_year - level ( 0.68) Так как данные коофициенты коорреляуии меньше 0.9 - то мультиколлениарность не наблюдается
Так же мы провели исследовательский анализ данных признаков тестовых данных и установили, что данные в тестовых данных распределены в целом также, как и данные признаков в тренировочной выборке

Мы провели подготовку данных и обучение моделей, и выявили, что: Мы создали свою метрику для оценки моделей — SMAPE (англ. symmetric mean absolute percentage error, «симметричное среднее абсолютное процентное отклонение»). Успехом будет считаться значение метрики SMAPE меньше 15 на тестовой выборке.

Будем рассматривать такие модели, как линейная регрессия, дерево решений

Лучшая модель по итогу перебора -DecisionTreeRegressor(max_depth=12, max_features=8, random_state=42) SMAPE на тестовой выборке - 14.212648779981658- что удовлетворяет успеху

Заметим, что самыми важными признаками, которые больше всего влияют на определение моделью JSR являются:

supervisor_evalustion
salary
employment_years
level
workload
last_year_viloations_yes
dept
ПРЕДСКАЗАНИЕ УВОЛЬНЕНИЯ СОТРУДНИКА ИЗ КОМПАНИИ

Для решения второй задачи мы получили исходные данные для решения второй задачи, для тестовой выборки входных признаков использован датафрейм из первой задачи ( в виду этого пропустим предобработку данных для этого датафрейма) Мы выявили, что :

Названия столбцов не нужно менять

Все названия столбцов в трех таблицах одинаковы

Типы данных во всех датафреймах всех признаков совпадают с описанием.

Пропусков данных не обнарудено Провели предобработку данных и выявили, что train_quit:

исправили орфографическую ошибку sinior на senior в столбце level

X_test_2:

С датасетом все в порядке

y_test_2:

С датасетом все в порядке

Мы провели исследовательский анализ данных, и выявили, что: распределение входных признаков второй задачи совпадает с распределением входных признаков первой задачи :

dept - большенство объектов работают в отделе sales (36%), остальные отделы распределены следующим образом technology (23.2%), purchasing (14.7%), marketing (14.6%), hr (11.6%)
level -большенство объектов имеют уровень junior (48.7%) либо уровень middle (42.4%), совсем небольшое количество объектов имеет уровень senior (9%)
workload - половина объектов имеют ворклоуд medium (53%) , остальные имеют ворклоуд low (30%) либо же high ( 16.9%)
last_year_promo - очти все объекты не имели повышения в прошлом году, и лишь 2.8% имели повышение в прошлом году
last_year_violations - большенство объектов (86%) не имели нарушений, и 14% имели нарушения в прошлом году
employmant_years - в компании практически в 2 раза больше сотрудников, которые работают в ней до 3х лет: опытных сотрудников гораздо меньше. Стоит учесть это при переборе параметров для модели в дальнейшем
supervisor_evaluation - большенство объектов имеет оценку 4 или 3, так же видно что оценку 1 ставят редко, однако она тоже встречается
salary - медианная зарплата в компании составляет 30,000, болшенство данных распределено в промежутке от 22,800 до 43,200. Средняя зарпалата больше медианной на почти 34,000. Данные зарплаты распределены нормально со мещением влево. Чем выше уровень объекта, тем выше заработная плата. Самая большая медианная зарплата в отделе technology, самая маленькая - в отедле sales
quit - существует незначительный дисбаланс целевого признака (3 к 1 - оставщиеся к уволенне)), учетм это при моделировании
Так же мы провели корреляционный анализ и заметили, что целевой признак имеет следующие зависимости:

сильная зависимость с признаком - employment_years (0.66) и salary (0.56)
умеренная зависимость с признаком - level (0.31), supervision_evoluation (0.25)
слабая зависимость с признаком - last_year_violations(0.19), last_year_promo (0.16), workload(0.13)
Не наблюдается связи со следующими признаками - dept, level, workload Нет связи между целевым признаком, и такми признакми как dept
Так же между входными признаками наблюдаются следующие сильные зависимости:

salary - workload ( 0.79)
salary - level ( 0.75)
emplayment_year - level ( 0.69) Так как данные коофициенты коорреляуии меньше 0.9 - то мультиколлениарность не наблюдается
Мы составили партрет уволившегося сотрудника :

доли уволившихся по отделам одинаковые , но чаще увольняются из отдела technology , меньше всего - hr
почти половина сотрудников уровня junior увольняются, чем выше уровень - тем ниже доля увольнения, senior очень редко увольняются
почти половина сотрудников с нагрузкой low увольняются, чем выше нагрузка - тем меньше увольнений. с нагрузкой high увольяются 0.179
28 процентов тех, кто не получил повышение в прошлом году - увольняются, и лишь 1 процент повышенных увольняется.
42 процента нарушевыних правила в ПГ увольянются , и лишь 26 процентов не нарушевших увольняются
среднее значение отработанных лет у отработавшего равно 1.84 лет, юольшенство уволившихся находятс в промежутке от 1 до 2 лет
большенство уволившихся получили отметку супервайзера в среднем равную 3, что меньше , чем большенство сотрудников в среднем ( 4)
средняя зарплата уволившихся меньше чем средняя по компании почти на 10 000 руб, и составляет 23885
Так же мы посомтрели на распределение JSR у уволивщихся сотрудников и оставщихся, и заметили, что:

JSR уволившихся сотрудников в среднем составляет 0.38, в то время как JSR неуволивщихся сотрудников составляет 0.61. На графике видно, что уволевщиеся сотрудники имеют распределение JSR слева, а оставшиеся - справа. В виду этого есть смысл включить JSR (предсказанынй линейной регрессией) как дополнительный признак для обучения модели и решения второй задачи

Мы провели подготовку данных, и выявили, что: обучающая выборка была равна 4000 объектов и 2204 обхектов с одинаковыми входными признаками, мы решили не удалять данные дубликаты , так как маловеротяно , что это ошибка в данных, а реальные объекты

Мы обучили три модели Логисчтическая регрессия, деревья решений, и модель Knn и определили, что : Лучшая модель по итогу перебора - DecisionTreeClassifier(max_depth=6, max_features=9, random_state=42) ROC-AUC на тестовой выборке - 0.9200485489638277 в целом такой же и на тренировочной, Данная метрика показывает хороший резульатат, удовлетворяющий успеху !

Мы проанализировали важность признаков и выявили, что: самые важные признаки для модели являются:

JSR
employment_years
salary
level
workload
Все остальные признаки не имеют влияния на модели В виду того, что успех достигнут, не будем удалять признаки

РЕКОМЕНДАЦИИ ДЛЯ КЛИЕНТА

важно учитывать, как сотрудники воспринимают свою оценку труда. Они серьезно воспринимают обратную связь, что напрямую влияет на их уровень удовлетворенности работой.
текучесть кадров — неизбежная часть бизнес-процессов. Возможно, стоит разработать дополнительные стимулы на ранних этапах работы (в течение 1-2 лет), такие как корпоративные мероприятия, социальные гарантии, премии и другие активности.
необходимо внимательно проанализировать работу отдела продаж и hr и уровень заработных плат сотрудников. Возможно, стоит подумать о создании условий для долгосрочной "привязки" сотрудников к отделу, например, установив гибкий график с возможностью удаленной работы.
удовлетворенность работой является важным фактором при принятии решения об увольнении. Поэтому стоит стремиться к тому, чтобы сотрудники получали максимальное удовольствие от своей деятельности. В этом случае текучесть кадров может значительно снизиться.
